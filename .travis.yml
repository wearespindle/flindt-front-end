language: node_js
node_js:
  - node

script:
  - npm i
  - npm run build

deploy:
  provider: s3
  access_key_id: AKIAINA3HRDOPMJGPGPQ
  secret_access_key:
    secure: ZjpR/iOYs+cs+lvUBqwbJ6Wx+G0XTA/Xl1byYUi11YJHzDBCjX1AZR5aHTueSST/XcdhGED/PaEjW/X3GEThqzyBpLFPKgDXOxN5SpGm6y9TClqAdl9zz/h6ZujwCpjVn3d36dheGijj65Q0odGFwmqFHrg/DzP4CMWyY2/hcJVRvIiqgAHaOsHQ3GJJw8Y+/mldD/EKlyDs1hDDHvVRf1nSMcclW1FXFOpaZJP8isEAIop41Y3OKk1n9abiHFMhsiCCnNlWcw1mS5GcvDT8xRRJ8eeaMIfhE1kqy7c+t/4sa4UG95eFhjSOJgNuIQSIlcvcS8Uimxu/dCTd0/P0GQEbGMXYBQm2wiJ5dFnnZRH5qOH01uIPXWqdIMJZZQDYgVt5MIIWa0cVRs28/g4EHI+J/+A9/DjoltQ4AJ1CiFLA7z+XDpFKlPwPDjjIDmJY2rkDBAwgFn1x0g8CI2CxAD2C7900FU8uEkeVEIqESX9r/jMVMI+rL+L3NTNMJGEdo+T3WQBfM/URYYub2XiL4u+jGTe5cBon0EgtygFpVGJ5tq4D8clxTMyz9XS5KFH69/oialq6e6PSlIFEi+Pp5ByCT15HE6KxHnb8Aa+A+/o3IGznF4m0yYvqINO9RBo0uCXatmaU+LT+peHveDA7DvmbPusYvndEvYS8LWCrzXs=
  bucket: flindt.wearespindle.com
  region: eu-west-1
  acl: public_read
  skip_cleanup: true
  local_dir: build

branches:
  only:
  - master
  - "/^hotfix/"

notifications:
  email: false
  slack:
    on_success: always
    on_failure: always
    rooms:
      secure: hTr3o0fY3iLktG21ZUgOU7sPKFIDRa0U8vvpFFIQI64zmyf60uCTWmzMozRkDNk8iWgedwmcL+CZKrcBpLWekHt0HivmD+xGVIjdtZDNfLN5gdGNAbS/UKzx2Axt5HTca84jAa8Ukgq601c0uNKfQlwHMAamL/rI9Z+H4YSLcbeQclNbcxqzaOgb6osKOAwSOete9j7JW0wa4s6Vb4ETVPAFR7vICYuH4jzG4C5BURgYZHp3CO9GlIaYcoI1lt6r/868Y5qt5v61h2v1jz2ZcV7sfxsEuDe0zpQjqhEaDzTaA6WLoQWWmZUDii3Rw6X8ByZtMUrhbk+HL9FLxpFTi45WZzE+kMZcg1cMNydMVxHv9knvAW4IIGrCJqBgH72lGEf9rJTqgUEUFvgzm8Bf4JoOHJCCN698YnHmphPzVg8DlPIDvs8Y55PeLgnk+ARWD+CzNotPWJcRomvz9FnmRMEW7v0a6s26JPNHzeUDcZvB36d66iwexb8cA/FvZzbHDQo34YO1hQmW0S3iLYvGJN95OvTVGoN3K0STgJwAr7gG3DzJ7LtGRebGGGZwekFreZk+g4e9GHGVZd2d+Ve335yfRuV/w4he/i848qFP0cHvFdb9sOBg62MZiA1nM5dN/z66yKqWx5ej4n/u/wdN08H5BIRLjb5E8n7UOMyUXxw=

